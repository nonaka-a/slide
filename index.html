<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>スライド パズル</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="header-toolbar">
        <button class="toolbar-btn" data-type="click" onclick="adjustZoom(0.1)">＋</button>
        <button class="toolbar-btn" data-type="click" onclick="adjustZoom(-0.1)">－</button>
        <button class="toolbar-btn" data-type="click" onclick="toggleFullscreen()">全画面</button>
        <button class="toolbar-btn" data-type="click" id="mute-btn" onclick="toggleMute()">音量: ON</button>
    </div>

    <div id="title-screen">
        <img src="image/title.png" alt="スライド パズル" class="title-logo">

        <div class="slider-container">
            <div class="slider-track">
                <img src="image/01.jpg" alt="Puzzle 1" class="slide-img">
                <img src="image/02.jpg" alt="Puzzle 2" class="slide-img">
                <img src="image/03.jpg" alt="Puzzle 3" class="slide-img">
                <img src="image/04.jpg" alt="Puzzle 4" class="slide-img">
                <img src="image/05.jpg" alt="Puzzle 5" class="slide-img">
                <img src="image/01.jpg" alt="Puzzle 1" class="slide-img">
                <img src="image/02.jpg" alt="Puzzle 2" class="slide-img">
                <img src="image/03.jpg" alt="Puzzle 3" class="slide-img">
                <img src="image/04.jpg" alt="Puzzle 4" class="slide-img">
                <img src="image/05.jpg" alt="Puzzle 5" class="slide-img">
            </div>
        </div>

        <button class="play-btn" onclick="startGame()">スタート</button>
    </div>

    <div id="game-screen">
        <div id="game-view-wrapper">
            <div class="level-selector">
                <button class="level-btn" data-type="click" onclick="initGame(1)">LV 1</button>
                <button class="level-btn" data-type="click" onclick="initGame(2)">LV 2</button>
                <button class="level-btn" data-type="click" onclick="initGame(3)">LV 3</button>
                <button class="level-btn" data-type="click" onclick="initGame(4)">LV 4</button>
                <button class="level-btn" data-type="click" onclick="initGame(5)">LV 5</button>
                <!-- クリエイトボタン追加 -->
                <button class="level-btn create-btn" data-type="click" onclick="initEditor()">クリエイト</button>
            </div>

            <!-- ボードとパレットを囲むコンテナ -->
            <div class="game-container">
                <div class="board" id="board">
                    <div class="exit-zone"></div>
                </div>
                
                <!-- パレット（エディタ用） -->
                <div id="editor-palette" style="display: none;">
                    <div class="palette-item piece small" onpointerdown="spawnPiece(event, 'small')"></div>
                    <div class="palette-item piece v-rect" onpointerdown="spawnPiece(event, 'v-rect')"></div>
                    <!-- 赤コマ(big)削除 -->
                    <div class="palette-item piece green-h" onpointerdown="spawnPiece(event, 'green-h')"></div>
                </div>
            </div>

            <div id="message"></div>

            <!-- 通常プレイ用コントロール -->
            <div class="controls" id="normal-controls">
                <button class="reset" data-type="click" onclick="showResetConfirm()">リセット</button>
                <button class="reset" data-type="click" onclick="showTitleConfirm()">タイトル</button>
            </div>

            <!-- エディタ用コントロール -->
            <div class="controls" id="editor-controls" style="display: none;">
                <!-- IDを追加してJSからテキスト操作しやすくする -->
                <button id="editor-action-btn" class="reset" data-type="click" onclick="handleEditorAction()">プレイ</button>
                <button class="reset" data-type="click" onclick="exitEditor()">もどる</button>
            </div>
        </div>
    </div>

    <div id="confirm-modal">
        <div class="modal-content">
            <div class="modal-text">リセットしますか？</div>
            <div class="modal-buttons">
                <button class="modal-btn yes" data-type="click" onclick="executeReset()">はい</button>
                <button class="modal-btn no" data-type="click" onclick="hideResetConfirm()">いいえ</button>
            </div>
        </div>
    </div>

    <div id="title-confirm-modal">
        <div class="modal-content">
            <div class="modal-text">タイトルにもどりますか？</div>
            <div class="modal-buttons">
                <button class="modal-btn yes" data-type="click" onclick="executeTitleReturn()">はい</button>
                <button class="modal-btn no" data-type="click" onclick="hideTitleConfirm()">いいえ</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>